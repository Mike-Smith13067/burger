<div class="jumbotron jumbotron-fluid">
    <div class="container">
        <img src="assets/img/burger.jpg" alt="burger">
        <h1 class="display-4">Eat-Da-Burger</h1>

    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-lg-6" id="uneaten">
            <h2>Burgers available to be eaten</h2>
            <ul>
                {{#each burgers}}
                {{#unless devoured}}
                {{> burgers/burger-block devoured=false}}
                {{/unless}}

                {{/each}}
            </ul>
        </div>
        <div class="col-lg-6" id="eaten">
            <h2>Burgers you have eaten.</h2>
            <ul>
                {{#each burgers}}
                {{#if devoured}}
                {{>burgers/burger-block devoured = true}}
                {{/if}}
                {{/each}}
            </ul>
        </div>
    </div>
    <div class="row">

        <div class="col-lg-12">


            <form class="form-group" id="create">

                <div class="form-group">
                    <label for="exampleFormControlTextarea1">Add a new burger</label>
                    <textarea class="form-control" id="newBurger" rows="3"></textarea>
                </div>

                <button type="submit" id="submit" class="btn btn-light">Submit</button><br>
            </form>
        </div>
    </div>
    <p>Create a burger here.</p>
</div>

</div>

<script type="text/javascript">
    // Create new burger
    $("#submit").on("click", function (event) {
        event.preventDefault();
        var newBurger = $("#newBurger").val().trim();
        if (newBurger == "") {
            // $("#error").html("Please enter a valid burger");

        } else {
            console.log(newBurger);
            var createdBurger = {
                burger_name: newBurger,
                devoured: false
            }
            $.post("api/burgers", createdBurger, function (data) {
                $("#newBurger").val("");
                location.reload();
            });
        };
    });
    // devour a burger
    $(".devour").on("click", function (event) {
        event.preventDefault();
        var id = $(this).data("id");
        var devour = $(this).data("newdevour");
        console.log(id, devour);
        if(!devour) {
            $.ajax("/api/burgers/" + id, {
                type: "PUT"
            }).then (function () {
                location.reload();
            });
        }else {
            $.ajax("/api/burgers/" + id, {
                type: "DELETE"
            }).then(function() {
                location.reload();
            })
        }
    });

</script>